# Turbine Agent Configuration

exchange:
  base_url: "https://api.turbinefi.com"
  ws_url: "wss://api.turbinefi.com"
  chain_id: 137  # Polygon mainnet
  
  # Timeouts (seconds)
  connect_timeout: 10.0
  request_timeout: 5.0
  ack_timeout: 5.0
  
  # Feature flags (set to true only if confirmed supported)
  features:
    post_only: false
    gtd_orders: false
    batch_cancel: false
    nonce_required: false # Set true if exchange requires incrementing nonces

strategy:
  # Market Making
  base_spread: 0.20
  min_price: 0.01
  max_price: 0.99
  
  # Inventory Skew
  # skew = -1 * (position / max_position) * skew_factor
  skew_factor: 0.01 
  
  # Imbalance Overlay
  imbalance_depth_n: 5
  imbalance_threshold: 2.0  # triggers if bid_depth / ask_depth > 2.0 or < 0.5
  overlay_bias: 0.005       # price shift when imbalanced
  persistence_seconds: 30.0 # how long imbalance must persist
  
  # Extremes Risk Control
  extreme_low: 0.10         # Below 10% is extreme zone
  extreme_high: 0.90        # Above 90% is extreme zone
  extreme_spread_mult: 2.0  # Widen spread by 2x in extremes
  extreme_size_mult: 0.5    # Reduce order size to 50% in extremes

rollover:
  enabled: true             # Enable automatic BTC quick market rollover
  poll_interval: 10.0       # Check for new market every 10 seconds

risk:
  # Hard Limits
  max_inventory_units: 1000
  max_portfolio_exposure: 10000.0 # Currency units
  
  # Drawdown
  hard_drawdown_limit: 0.10 # 10% max drawdown from high water mark stops trading
  soft_drawdown_limit: 0.05 # 5% drawdown triggers defensive mode (halve size, double spread)
  
  # Volatility Guard
  vol_lookback_seconds: 60
  vol_pause_threshold: 0.05 # 5% move in 60s pauses trading

loop:
  tick_interval_ms: 500
  reconcile_interval_ms: 500
  replace_threshold: 0.001 # min price drift to trigger modify/replace
  max_quote_age_seconds: 30.0

logging:
  level: "INFO"
  file_path: "turbine_agent.log"
  rotation_max_bytes: 10485760 # 10MB
  rotation_backup_count: 5
